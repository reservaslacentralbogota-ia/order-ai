<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat de Restaurante</title>
<style>
body {
font-family: sans-serif;
margin: 20px;
background-color: #f4f4f4;
display: flex;
flex-direction: column;
align-items: center;
}
.chat-container {
width: 90%;
max-width: 600px;
background-color: #fff;
border-radius: 8px;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
padding: 20px;
display: flex;
flex-direction: column;
overflow-y: auto;
height: 400px;
margin-bottom: 20px;
}
.message {
background-color: #e1e1e1;
color: #333;
border-radius: 6px;
padding: 10px;
margin-bottom: 10px;
align-self: flex-start;
max-width: 80%;
word-break: break-word;
}
.ai-message {
background-color: #007bff;
color: #fff;
align-self: flex-start;
}
.user-message {
background-color: #28a745;
color: #fff;
align-self: flex-end;
}
.input-area {
display: flex;
width: 90%;
max-width: 600px;
}
.input-area input {
flex-grow: 1;
padding: 10px;
border: 1px solid #ccc;
border-radius: 6px 0 0 6px;
}
.input-area button {
background-color: #007bff;
color: #fff;
border: none;
padding: 10px 15px;
border-radius: 0 6px 6px 0;
cursor: pointer;
}
</style>
</head>
<body>
<div class="chat-container" id="chat-log">
<div class="message ai-message">
<div class="content">Â¡Hola! Mi nombre es SofÃ­a, la asistente virtual de La Central BogotÃ¡. Â¿Me puedes decir tu nombre, por favor? ðŸ˜Š</div>
</div>
</div>
<div class="input-area">
<input type="text" id="user-input" placeholder="Escribe tu pedido...">
<button onclick="sendMessage()">Enviar</button>
</div>

<script>
    const chatLog = document.getElementById('chat-log');
    const userInput = document.getElementById('user-input');

    function sendMessage() {
        const message = userInput.value.trim();
        if (message) {
            appendMessage('user-message', message);
            userInput.value = '';
            fetch('/api/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                appendMessage('ai-message', data.response);
                chatLog.scrollTop = chatLog.scrollHeight;
            });
        }
    }

    function appendMessage(className, text) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('message', className);
        messageDiv.innerHTML = `<div class="content">${text}</div>`;
        chatLog.appendChild(messageDiv);
    }

    userInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    });

    // Hacer scroll al final del chat
    chatLog.scrollTop = chatLog.scrollHeight;
</script>
</body>
</html>